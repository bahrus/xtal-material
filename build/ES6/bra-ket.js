import{getESModuleUrl}from'./xtal-temp-workaround.js';export function getBasePath(a){let b;const c=self[lispToSnakeCase(a)];if(c)b=c.href;else{const a=document.currentScript;b=a?a.src:getESModuleUrl()}return b.split('/').slice(0,-1).join('/')}function loadTemplate(a,b){const c=a.dataset.src;if(!c)b&&customElements.define(b.tagName,b.cls);else if(_cachedTemplates[c])a.innerHTML=_cachedTemplates[c],b&&customElements.define(b.tagName,b.cls);else{if(fetchInProgress[c])return void(b&&setTimeout(()=>{loadTemplate(a,b)},100));fetchInProgress[c]=!0,fetch(c,{credentials:'include'}).then((d)=>{d.text().then((d)=>{fetchInProgress[c]=!1,_cachedTemplates[c]=d,a.innerHTML=d,b&&customElements.define(b.tagName,b.cls)})})}}export function lispToSnakeCase(a){return a.split('-').join('_')}export class BraKet extends HTMLElement{static get is(){return'bra-ket'}get tn(){return this.tagName.toLowerCase()}looksLike(){}get CE(){return this._ce||(this._ce=customElements.get(this.tn)),this._ce}constructor(){if(super(),Object.getPrototypeOf(this)===BraKet.prototype){const a=document.querySelectorAll('template[data-src]');for(let b=0,c=a.length;b<c;b++)loadTemplate(a[b])}else this.attachShadow({mode:'open'}),this.addTemplate()}customizeClone(){}initShadowRoot(){}addTemplate(){this.CE._template||(this.CE._template={});const a=this.looksLike()||this.tn;if(!this.CE._template[a]){lispToSnakeCase(a)+'_template';this.CE._template[a]=self[lispToSnakeCase(a)+'_template']}const b=this.CE._template[a].content.cloneNode(!0);this.customizeClone(b),this.shadowRoot.appendChild(b),this.initShadowRoot()}}const _cachedTemplates={},fetchInProgress={};export function initCE(a,b,c,d){if(customElements.get(a))return;const e=d||a,f=lispToSnakeCase(e)+'_template';let g=self[f];g||(g=document.createElement('template'),g.id=f,g.dataset.src=c+'/'+e+'.html',document.head.appendChild(g)),loadTemplate(g,{cls:b,sharedTemplateTagName:d,tagName:a})}export const basePath=getBasePath(BraKet.is);customElements.define(BraKet.is,BraKet);