var _cachedTemplates={},fetchInProgress={};export function loadTemplate(a,b){var c=a.dataset.src;if(!c)b&&customElements.define(b.tagName,b.cls);else if(_cachedTemplates[c])a.innerHTML=_cachedTemplates[c],b&&customElements.define(b.tagName,b.cls);else{if(fetchInProgress[c])return void(b&&setTimeout(function(){loadTemplate(a,b)},100));fetchInProgress[c]=!0,fetch(c,{credentials:'include'}).then(function(d){d.text().then(function(d){fetchInProgress[c]=!1,_cachedTemplates[c]=d,a.innerHTML=d,a.setAttribute('loaded',''),b&&customElements.define(b.tagName,b.cls)})})}}export var TemplMount=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return b._alreadyDidGlobalCheck||(b._alreadyDidGlobalCheck=!0,a.loadTemplatesOutsideShadowDOM(),'loading'===document.readyState?document.addEventListener('DOMContentLoaded',function(){a.loadTemplatesOutsideShadowDOM(),a.monitorHeadForTemplates()}):a.monitorHeadForTemplates()),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'getHost',value:function(){var a=this.parentNode;return a.host}},{key:'loadTemplates',value:function(a){for(var b=a.querySelectorAll('template[data-src]'),c=0,d=b.length;c<d;c++)loadTemplate(b[c])}},{key:'loadTemplatesOutsideShadowDOM',value:function(){this.loadTemplates(document)}},{key:'loadTemplateInsideShadowDOM',value:function(){var a=this.getHost();a&&this.loadTemplates(a)}},{key:'monitorHeadForTemplates',value:function(){this._observer=new MutationObserver(function(a){a.forEach(function(a){a.addedNodes.forEach(function(a){'TEMPLATE'===a.tagName&&loadTemplate(a)})})})}},{key:'connectedCallback',value:function(){var a=this;this.loadTemplateInsideShadowDOM(),'loading'===document.readyState&&document.addEventListener('DOMContentLoaded',function(){a.loadTemplateInsideShadowDOM()})}}],[{key:'is',get:function(){return'templ-mount'}}]),b}(HTMLElement);TemplMount._alreadyDidGlobalCheck=!1,customElements.define(TemplMount.is,TemplMount);